angular.module("study",[]).run(["$rootScope","$location","$window","$timeout",function(e,n,t,o){function r(n){for(var t=0;t<e.phrases.length;t++){var o=e.phrases[t];if(o.id==n)return o}}e.page="main",e.search="",e.phrases=window.phrases,e.edit=!1,e.searchFocus=!1,e.scrollTop=0,e.focusSearch=function(){e.searchFocus=!0},e.open=function(e){n.url("edit/"+e.id)},e.$on("$locationChangeSuccess",function(){var t;if("/add"===n.url())e.scrollTop=document.body.scrollTop,e.edit=!0;else if(t=n.url().match(/^\/edit\/(.+)/))e.scrollTop=document.body.scrollTop,e.edit=r(t[1]),e.edit||n.url("/");else{if("/"!==n.url())return n.url("/");e.edit=!1,o(function(){document.body.scrollTop=e.scrollTop},0)}})}]),angular.module("study").controller("EditController",["$scope","$rootScope","$http","$location",function(e,n,t,o){function r(){return{en:e.en,th:e.th,tags:e.tags}}function i(e,t){for(var o=0;o<n.phrases.length;o++){var r=n.phrases[o];if(r.id===e)return void angular.extend(r,t)}}function s(e){for(var t=0;t<n.phrases.length;t++)if(n.phrases[t].id===e)return void n.phrases.splice(t,1)}function u(e,n,t){console.log("ERROR at: "+n+' "'+t+'" : ',e),alert("Sorry, something went wrong while trying to "+n+" "+t+". Try again.")}e.empty=function(){e.id=null,e.en="",e.th="",e.tags="",document.getElementById("en-input").focus()},e.edit=function(n){angular.extend(e,n)},e.add=function(){var e=r();t.post("api/phrases",e).success(function(t){e.id=t.id,n.phrases.unshift(e)}).error(function(n){u(n,"add",e.en)}),o.url("/")},e.update=function(){var n=r();t.put("api/phrases/"+e.id,n).success(function(){i(e.id,n)}).error(function(e){u(e,"update",n.en)}),o.url("/")},e.destroy=function(n){n.preventDefault(),confirm("You really want to delete this phrase?")&&(t.delete("api/phrases/"+e.id).success(function(){s(e.id)}).error(function(e){u(e,"delete",phrase.en)}),o.url("/"))},angular.isObject(n.edit)?e.edit(n.edit):e.empty()}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljL2J1aWxkLmpzIiwic291cmNlcyI6WyJzdHVkeS5qcyIsImNvbnRyb2xsZXJzL0VkaXRDb250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFFBQUEsT0FBQSxZQUVBLEtBQUEsYUFBQSxZQUFBLFVBQUEsV0FBQSxTQUFBLEVBQUEsRUFBQSxFQUFBLEdBc0NBLFFBQUEsR0FBQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFBQSxFQUNBLElBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxJQXZDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLE9BQUEsR0FDQSxFQUFBLFFBQUEsT0FBQSxRQUNBLEVBQUEsTUFBQSxFQUNBLEVBQUEsYUFBQSxFQUNBLEVBQUEsVUFBQSxFQUVBLEVBQUEsWUFBQSxXQUNBLEVBQUEsYUFBQSxHQUdBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxJQUFBLFFBQUEsRUFBQSxLQUdBLEVBQUEsSUFBQSx5QkFBQSxXQUNBLEdBQUEsRUFDQSxJQUFBLFNBQUEsRUFBQSxNQUNBLEVBQUEsVUFBQSxTQUFBLEtBQUEsVUFDQSxFQUFBLE1BQUEsTUFFQSxJQUFBLEVBQUEsRUFBQSxNQUFBLE1BQUEsaUJBQ0EsRUFBQSxVQUFBLFNBQUEsS0FBQSxVQUNBLEVBQUEsS0FBQSxFQUFBLEVBQUEsSUFDQSxFQUFBLE1BQUEsRUFBQSxJQUFBLFNBRUEsQ0FDQSxHQUFBLE1BQUEsRUFBQSxNQUFBLE1BQUEsR0FBQSxJQUFBLElBQ0EsR0FBQSxNQUFBLEVBQ0EsRUFBQSxXQUNBLFNBQUEsS0FBQSxVQUFBLEVBQUEsV0FDQSxTQ25DQSxRQUFBLE9BQUEsU0FBQSxXQUFBLGtCQUFBLFNBQUEsYUFBQSxRQUFBLFlBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQXNFQSxRQUFBLEtBQ0EsT0FDQSxHQUFBLEVBQUEsR0FDQSxHQUFBLEVBQUEsR0FDQSxLQUFBLEVBQUEsTUFJQSxRQUFBLEdBQUEsRUFBQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxJQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsUUFBQSxFQUNBLElBQUEsRUFBQSxLQUFBLEVBRUEsV0FEQSxTQUFBLE9BQUEsRUFBQSxJQU1BLFFBQUEsR0FBQSxHQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFFBQUEsT0FBQSxJQUNBLEdBQUEsRUFBQSxRQUFBLEdBQUEsS0FBQSxFQUVBLFdBREEsR0FBQSxRQUFBLE9BQUEsRUFBQSxHQU1BLFFBQUEsR0FBQSxFQUFBLEVBQUEsR0FDQSxRQUFBLElBQUEsYUFBQSxFQUFBLEtBQUEsRUFBQSxPQUFBLEdBQ0EsTUFBQSwrQ0FBQSxFQUFBLElBQUEsRUFBQSxnQkFoR0EsRUFBQSxNQUFBLFdBQ0EsRUFBQSxHQUFBLEtBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxHQUFBLEdBQ0EsRUFBQSxLQUFBLEdBRUEsU0FBQSxlQUFBLFlBQUEsU0FHQSxFQUFBLEtBQUEsU0FBQSxHQUNBLFFBQUEsT0FBQSxFQUFBLElBSUEsRUFBQSxJQUFBLFdBRUEsR0FBQSxHQUFBLEdBRUEsR0FBQSxLQUFBLGNBQUEsR0FDQSxRQUFBLFNBQUEsR0FDQSxFQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxRQUFBLEtBRUEsTUFBQSxTQUFBLEdBQ0EsRUFBQSxFQUFBLE1BQUEsRUFBQSxNQUdBLEVBQUEsSUFBQSxNQUtBLEVBQUEsT0FBQSxXQUVBLEdBQUEsR0FBQSxHQUVBLEdBQUEsSUFBQSxlQUFBLEVBQUEsR0FBQSxHQUNBLFFBQUEsV0FDQSxFQUFBLEVBQUEsR0FBQSxLQUVBLE1BQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxTQUFBLEVBQUEsTUFHQSxFQUFBLElBQUEsTUFJQSxFQUFBLFFBQUEsU0FBQSxHQUVBLEVBQUEsaUJBRUEsUUFBQSw0Q0FFQSxFQUFBLE9BQUEsZUFBQSxFQUFBLElBQ0EsUUFBQSxXQUNBLEVBQUEsRUFBQSxNQUVBLE1BQUEsU0FBQSxHQUNBLEVBQUEsRUFBQSxTQUFBLE9BQUEsTUFHQSxFQUFBLElBQUEsT0F1Q0EsUUFBQSxTQUFBLEVBQUEsTUFDQSxFQUFBLEtBQUEsRUFBQSxNQUVBLEVBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyLm1vZHVsZSgnc3R1ZHknLCBbXSlcblxuICAucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkbG9jYXRpb24sICR3aW5kb3csICR0aW1lb3V0KSB7XG5cbiAgICAkcm9vdFNjb3BlLnBhZ2UgICAgICAgID0gJ21haW4nO1xuICAgICRyb290U2NvcGUuc2VhcmNoICAgICAgPSAnJztcbiAgICAkcm9vdFNjb3BlLnBocmFzZXMgICAgID0gd2luZG93LnBocmFzZXM7XG4gICAgJHJvb3RTY29wZS5lZGl0ICAgICAgICA9IGZhbHNlO1xuICAgICRyb290U2NvcGUuc2VhcmNoRm9jdXMgPSBmYWxzZTtcbiAgICAkcm9vdFNjb3BlLnNjcm9sbFRvcCAgID0gMDtcblxuICAgICRyb290U2NvcGUuZm9jdXNTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAkcm9vdFNjb3BlLnNlYXJjaEZvY3VzID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgJHJvb3RTY29wZS5vcGVuID0gZnVuY3Rpb24gKHBocmFzZSkge1xuICAgICAgJGxvY2F0aW9uLnVybCgnZWRpdC8nICsgcGhyYXNlLmlkKTtcbiAgICB9O1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbWF0Y2g7XG4gICAgICBpZiAoJGxvY2F0aW9uLnVybCgpID09PSAnL2FkZCcpIHtcbiAgICAgICAgJHJvb3RTY29wZS5zY3JvbGxUb3AgPSBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgJHJvb3RTY29wZS5lZGl0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG1hdGNoID0gJGxvY2F0aW9uLnVybCgpLm1hdGNoKC9eXFwvZWRpdFxcLyguKykvKSkge1xuICAgICAgICAkcm9vdFNjb3BlLnNjcm9sbFRvcCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgICAgICAkcm9vdFNjb3BlLmVkaXQgPSBmaW5kUGhyYXNlKG1hdGNoWzFdKTtcbiAgICAgICAgaWYgKCEkcm9vdFNjb3BlLmVkaXQpICRsb2NhdGlvbi51cmwoJy8nKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAoJGxvY2F0aW9uLnVybCgpICE9PSAnLycpIHJldHVybiAkbG9jYXRpb24udXJsKCcvJyk7XG4gICAgICAgICRyb290U2NvcGUuZWRpdCA9IGZhbHNlO1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSAkcm9vdFNjb3BlLnNjcm9sbFRvcDtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgfSk7XG5cblxuICAgIGZ1bmN0aW9uIGZpbmRQaHJhc2UoaWQpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHJvb3RTY29wZS5waHJhc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwaHJhc2UgPSAkcm9vdFNjb3BlLnBocmFzZXNbaV07XG4gICAgICAgIGlmIChwaHJhc2UuaWQgPT0gaWQpIHJldHVybiBwaHJhc2U7XG4gICAgICB9XG4gICAgfVxuXG4gIH0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnc3R1ZHknKS5jb250cm9sbGVyKCdFZGl0Q29udHJvbGxlcicsIGZ1bmN0aW9uICgkc2NvcGUsICRyb290U2NvcGUsICRodHRwLCAkbG9jYXRpb24pIHtcblxuXG4gICRzY29wZS5lbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAkc2NvcGUuaWQgICA9IG51bGw7XG4gICAgJHNjb3BlLmVuICAgPSAnJztcbiAgICAkc2NvcGUudGggICA9ICcnO1xuICAgICRzY29wZS50YWdzID0gJyc7XG5cbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW4taW5wdXQnKS5mb2N1cygpO1xuICB9XG5cbiAgJHNjb3BlLmVkaXQgPSBmdW5jdGlvbiAocGhyYXNlKSB7XG4gICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCBwaHJhc2UpO1xuICB9XG5cblxuICAkc2NvcGUuYWRkID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIHBocmFzZSA9IGdldERhdGEoKTtcblxuICAgICRodHRwLnBvc3QoJ2FwaS9waHJhc2VzJywgcGhyYXNlKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBwaHJhc2UuaWQgPSByZXMuaWQ7XG4gICAgICAgICRyb290U2NvcGUucGhyYXNlcy51bnNoaWZ0KHBocmFzZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgZXJyKG1zZywgJ2FkZCcsIHBocmFzZS5lbik7XG4gICAgICB9KTtcblxuICAgICRsb2NhdGlvbi51cmwoJy8nKTtcblxuICB9O1xuXG5cbiAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBwaHJhc2UgPSBnZXREYXRhKCk7XG5cbiAgICAkaHR0cC5wdXQoJ2FwaS9waHJhc2VzLycgKyAkc2NvcGUuaWQsIHBocmFzZSlcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdXBkYXRlUGhyYXNlKCRzY29wZS5pZCwgcGhyYXNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24gKG1zZykge1xuICAgICAgICBlcnIobXNnLCAndXBkYXRlJywgcGhyYXNlLmVuKTtcbiAgICAgIH0pO1xuXG4gICAgJGxvY2F0aW9uLnVybCgnLycpO1xuXG4gIH07XG5cbiAgJHNjb3BlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoJGV2ZW50KSB7XG5cbiAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmICghY29uZmlybSgnWW91IHJlYWxseSB3YW50IHRvIGRlbGV0ZSB0aGlzIHBocmFzZT8nKSkgcmV0dXJuO1xuXG4gICAgJGh0dHAuZGVsZXRlKCdhcGkvcGhyYXNlcy8nICsgJHNjb3BlLmlkKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xuICAgICAgICByZW1vdmVQaHJhc2UoJHNjb3BlLmlkKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24gKG1zZykge1xuICAgICAgICBlcnIobXNnLCAnZGVsZXRlJywgcGhyYXNlLmVuKTtcbiAgICAgIH0pO1xuXG4gICAgJGxvY2F0aW9uLnVybCgnLycpO1xuXG4gIH07XG5cblxuICBmdW5jdGlvbiBnZXREYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBlbjogJHNjb3BlLmVuLFxuICAgICAgdGg6ICRzY29wZS50aCxcbiAgICAgIHRhZ3M6ICRzY29wZS50YWdzXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVwZGF0ZVBocmFzZShpZCwgZGF0YSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHJvb3RTY29wZS5waHJhc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGhyYXNlID0gJHJvb3RTY29wZS5waHJhc2VzW2ldO1xuICAgICAgaWYgKHBocmFzZS5pZCA9PT0gaWQpIHtcbiAgICAgICAgYW5ndWxhci5leHRlbmQocGhyYXNlLCBkYXRhKVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlUGhyYXNlKGlkKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkcm9vdFNjb3BlLnBocmFzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICgkcm9vdFNjb3BlLnBocmFzZXNbaV0uaWQgPT09IGlkKSB7XG4gICAgICAgICRyb290U2NvcGUucGhyYXNlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlcnIobXNnLCBhY3Rpb24sIHBocmFzZSkge1xuICAgIGNvbnNvbGUubG9nKCdFUlJPUiBhdDogJythY3Rpb24rJyBcIicrcGhyYXNlKydcIiA6ICcsICBtc2cpO1xuICAgIGFsZXJ0KCdTb3JyeSwgc29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgdHJ5aW5nIHRvICcrYWN0aW9uKycgJytwaHJhc2UrJy4gVHJ5IGFnYWluLicpO1xuICB9XG5cblxuXG4gIGlmIChhbmd1bGFyLmlzT2JqZWN0KCRyb290U2NvcGUuZWRpdCkpIHtcbiAgICAkc2NvcGUuZWRpdCgkcm9vdFNjb3BlLmVkaXQpO1xuICB9IGVsc2Uge1xuICAgICRzY29wZS5lbXB0eSgpO1xuICB9XG5cblxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9